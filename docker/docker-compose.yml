# ======================================================================
#
# AHCRAWLER
#
# adapted source: https://www.bornfight.com/blog/blog-lamp-docker-setup-with-php-8-and-mariadb-for-symfony-projects/
#
# (1) see .env for set variables
# (2) run "docker-compose up" to startup
# 
# ======================================================================
version: '3.9'

networks:
  defaultnetwork:

services:

  # ---------- app server: apache httpd + php
  server:
    build:
      context: .
      dockerfile: ./server/Dockerfile
    container_name: '${APP_NAME}-server'
    ports:
      - '${APP_PORT}:80'

    working_dir: ${WEBROOT}
    
    volumes:
      - ../:/var/www/${APP_NAME}
      - ./server/apache/sites-enabled:/etc/apache2/sites-enabled
      - ./server/php/php.ini:/usr/local/etc/php/conf.d/extra-php-config.ini

    networks:
      - defaultnetwork
    user: ${DOCKER_USER_UID}
